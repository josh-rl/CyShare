package com.example.cyshare_frontend;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

import com.android.volley.RequestQueue;
import com.android.volley.toolbox.Volley;
import com.example.cyshare_frontend.controller.backend_io;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.Random;

public class passenger_request_booking extends AppCompatActivity {
    private TextView driverBoooking;
    private RequestQueue volleyQueue;
    private String userName;
    private String name;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_passenger_request_booking);
        volleyQueue = Volley.newRequestQueue(this);
        /**
         * this is not using a correct link
         */
        String userUrl = "http://coms-309-031.cs.iastate.edu:8080/users/all";
        volleyQueue = Volley.newRequestQueue(this);

/**
 * saves info using bundle
 */
        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        driverBoooking = findViewById(R.id.driver_booking_text);
        userName = extras.getString("USERNAME");
        name = extras.getString("NAME");
/**
 * displays info on screen and also sends it
 */
        driverBoooking.setText("Name:"+ name +"\r\n"+"Confirmation Number:" + Integer.toString(val) +"\r\n" + "Pick up Date: " + "\r\n" + "Pick up Time" + "\r\n" + "Destination Location:");
        JSONArray to_back = create_post_object(val);
        backend_io.serverPost(volleyQueue,userUrl ,to_back);

        /**
         Bundle extras = new Bundle();
         extras.putString("USERNAME", userName);
         */
    }

    /**
     * creates a random value and saves it in val
     */
    Random random =new Random();
    int val = random.nextInt(100000-1)+1;

    /**
     * creates a json object
     * @param con
     * @return
     */
    private  JSONArray create_post_object(int con) {
        con = val;
        JSONObject jason = new JSONObject();
        JSONArray arr1 = new JSONArray();
        try {
            jason.put("Confirmation ", val);

        } catch (JSONException e) {
            e.printStackTrace();
        }
        arr1.put(jason);
        return arr1;
    }

// server post

// text view where it shows the pick up location
// destination location
// pick time and date
//confirmation number generated by random number generator and send to the server

}